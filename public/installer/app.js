document.addEventListener("DOMContentLoaded",function(){var l=document.getElementById("generate_key");l&&l.addEventListener("click",function(n){n.preventDefault(),fetch("/setup/generate-app-key").then(function(e){if(e.ok)return e.text();throw new Error("Request failed")}).then(function(e){var t=document.getElementById("app_key");t.value=e}).catch(function(e){console.error("Error:",e)})});const s=document.getElementById("modal"),m=document.getElementById("openModal"),u=document.getElementById("closeModal");s&&(m.addEventListener("click",()=>{s.classList.add("active")}),u.addEventListener("click",()=>{s.classList.remove("active")}));function a(n,e){var t=document.getElementById("errorMessage"),r=n==="error"?"bg-red-100":"bg-green-100",o=n==="error"?"text-red-500":"text-green-500";t.innerHTML=e,t.classList.remove("hidden"),t.classList.add("block",r,o)}function c(n,e){var t=document.getElementById("dataFormButton"),r=n==="error"?"!bg-red-500":"!bg-green-500";t.innerHTML=e,t.classList.remove("!bg-orange-500"),t.classList.add(r)}var g=document.querySelector("form");g&&(g.setAttribute("novalidate","novalidate"),document.addEventListener("click",function(n){if(n.target&&n.target.id==="dataFormButton"){n.preventDefault();var e=document.getElementById("dataForm"),t=document.getElementById("errorMessage"),r=document.getElementById("dataFormButton"),o=document.getElementById("next_step"),i=r.innerHTML,v=document.getElementById("dataFormCheck").value;r.innerHTML="Testing...",r.setAttribute("disabled",!0),r.classList.remove("!bg-red-500","!bg-green-500"),r.classList.add("!bg-orange-500"),t.classList.remove("block","bg-red-100","bg-green-100","text-red-500","text-green-500"),t.classList.add("hidden"),fetch(v,{method:"POST",body:new FormData(e)}).then(function(d){if(d.ok)return d.json();throw r.removeAttribute("disabled"),new Error("Request failed")}).then(function(d){console.log(d),r.removeAttribute("disabled"),d.hasOwnProperty("Error")?(a("error",d.Error),c("error",i),o.classList.remove("block"),o.classList.add("hidden")):(a("success",d.Success),c("success",i),o.classList.remove("hidden"),o.classList.add("block"))}).catch(function(d){c("error",i),a("error","Something was wrong! Please try again."),o.classList.remove("block"),o.classList.add("hidden")})}}))});
